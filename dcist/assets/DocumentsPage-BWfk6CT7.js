import{c as Ae,r as i,j as e,s as J,B as n,t as a,af as Ce,h as Ge,ag as q,w,C as pe,d as Oe,b as je,G as U,L as Ve,x as Re}from"./index-B5GP4ZU0.js";import{I as T}from"./input-C4RtHFee.js";import{L as d}from"./label-k4a1c30R.js";import{T as fe}from"./textarea-DqFXOEs1.js";import{D as X,a as Z,b as ee,c as se,d as te,e as ae}from"./dialog-D8fBtqfZ.js";import{T as We,a as ze,b as H,c as f,d as Me,e as h}from"./table-BDHQV-gI.js";import{B as x}from"./badge-ALW9Fyqs.js";import{S as _,a as $,b as Q,c as K,d as A}from"./select-dEcH2o1V.js";import{C as ie}from"./checkbox-sHSxgcd9.js";import{S as Ye}from"./shield-CUjFhZuP.js";import{F as le}from"./file-text-DFT2MlA2.js";import{L as qe}from"./lock-D7-TLejr.js";import{a as He}from"./DocumentViewer-s8Io7fQk.js";import{f as ve}from"./format-MGXwiYcE.js";import{U as ye}from"./upload-wi-AKsz6.js";import{S as _e}from"./search-JXwptwBL.js";import{F as $e}from"./funnel-Cii8H73m.js";import{E as be}from"./eye-BsbdD2Tc.js";import{T as Ne,S as we}from"./trash-2-Dvt3QX8d.js";import"./check-BfJ-MShT.js";const Qe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ke=Ae("circle-check",Qe);function Je({open:m,onOpenChange:g,onConsentGranted:C}){const[v,G]=i.useState(!1),[D,S]=i.useState(!1),O=async()=>{if(!v){a.error("Please accept the consent to continue");return}S(!0);try{await Ce.grant(),a.success("Consent granted successfully"),await C(),g(!1)}catch(u){a.error(u.message||"Failed to grant consent"),S(!1)}};return e.jsx(X,{open:m,onOpenChange:g,children:e.jsxs(Z,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ee,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-[#E31E24]/10 flex items-center justify-center",children:e.jsx(Ye,{className:"h-6 w-6 text-[#E31E24]"})}),e.jsx(se,{className:"text-2xl text-[#1B2B5E]",children:"Google Drive Access Consent"})]}),e.jsx(te,{className:"text-base text-[#666]",children:"Before uploading documents, we need your explicit consent to store them in your Google Drive account."})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"bg-[#F5F5F5] rounded-lg p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(le,{className:"h-5 w-5 text-[#1B2B5E] mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[#1B2B5E] mb-1",children:"What This Means"}),e.jsx("p",{className:"text-sm text-[#666]",children:"Documents you upload will be stored in your personal Google Drive account, not on our servers. This ensures your data remains in your control."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(qe,{className:"h-5 w-5 text-[#1B2B5E] mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[#1B2B5E] mb-1",children:"Limited Access Scope"}),e.jsx("p",{className:"text-sm text-[#666]",children:"We only request access to files created by this application. We cannot access your other Google Drive files or folders."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ke,{className:"h-5 w-5 text-[#138808] mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-[#1B2B5E] mb-1",children:"Your Control"}),e.jsx("p",{className:"text-sm text-[#666]",children:"You can revoke this access at any time from the settings page. Your documents will remain in your Google Drive even after revocation."})]})]})]}),e.jsx("div",{className:"border border-[#E5E5E5] rounded-lg p-4 space-y-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ie,{id:"consent",checked:v,onCheckedChange:u=>G(u),className:"mt-1"}),e.jsxs(d,{htmlFor:"consent",className:"cursor-pointer text-sm leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-[#1B2B5E]",children:"I authorize this application to store documents in my Google Drive account."}),e.jsx("br",{}),e.jsx("span",{className:"text-[#666]",children:"I understand that documents will be stored in my personal Google Drive and I can revoke this access at any time."})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-xs text-blue-800",children:[e.jsx("strong",{children:"Privacy Note:"})," We only store metadata (title, category, description) in our database. The actual files remain in your Google Drive. We never access files you didn't upload through this application."]})]})})]}),e.jsxs(ae,{children:[e.jsx(n,{variant:"outline",onClick:()=>g(!1),disabled:D,children:"Cancel"}),e.jsx(n,{onClick:O,disabled:!v||D,className:"bg-[#E31E24] hover:bg-[#E31E24]/90",children:D?"Processing...":"Grant Consent & Continue"})]})]})})}function Xe({panchayatId:m}){const[g,C]=Ge(),[v,G]=i.useState([]),[D,S]=i.useState(!0),[O,u]=i.useState(!1),[De,E]=i.useState(!1),[c,ne]=i.useState(!1),[p,re]=i.useState(!1),[y,oe]=i.useState(!0),[ce,de]=i.useState(!1),[I,V]=i.useState(null),[Se,me]=i.useState(null),[Ee,R]=i.useState(!1),[W,z]=i.useState(null),[ke,F]=i.useState(!1),[r,b]=i.useState({title:"",description:"",category:"",visibility:"PRIVATE"}),[l,N]=i.useState({title:"",description:"",category:"",visibility:"PRIVATE"}),[M,Pe]=i.useState(""),[B,Ie]=i.useState("all");i.useEffect(()=>{const s=g.get("google_connected"),t=g.get("google_error");s==="true"?(a.success("Google Drive connected successfully! You can now upload documents."),k(),C({},{replace:!0})):t==="true"&&(a.error("Failed to connect Google Drive. Please try again."),C({},{replace:!0}))},[g,C]),i.useEffect(()=>{const s=()=>{document.visibilityState==="visible"&&!y&&k()};return document.addEventListener("visibilitychange",s),()=>{document.removeEventListener("visibilitychange",s)}},[y]),i.useEffect(()=>{k(),P()},[m,B]);const k=async()=>{oe(!0);try{const[s,t]=await Promise.all([Ce.getStatus(),q.getConnectionStatus().catch(()=>({isConnected:!1}))]),o=s?.hasConsent===!0,j=t?.isConnected===!0;ne(o),re(j)}catch(s){console.error("Failed to check consent/connection status:",s),ne(!1),re(!1)}finally{oe(!1)}},P=async()=>{S(!0);try{const s=await w.getAll(m,B!=="all"?B:void 0);console.log("Fetched documents:",s),console.log("Documents count:",s?.length),G(s||[])}catch(s){console.error("Error fetching documents:",s),a.error(s.message||"Failed to load documents")}finally{S(!1)}},Fe=()=>{if(!c){E(!0);return}u(!0)},Be=async()=>{try{const s=await q.getAuthorizationUrl();if(!s||s.trim()==="")throw new Error("Failed to get Google authorization URL. Please try again.");window.location.replace(s)}catch(s){console.error("Error in handleConsentGranted:",s);const t=s.response?.data?.message||s.response?.data?.error||s.message||"Failed to initiate Google Drive connection. Please try again.";a.error(t),await k()}},Le=async s=>{if(s?.preventDefault(),!I||!r.title||!r.category){a.error("Please fill all required fields and select a file");return}if(!c){E(!0);return}de(!0);try{await w.upload(m,I,{title:r.title,description:r.description,category:r.category,visibility:r.visibility}),a.success("Document uploaded successfully to your Google Drive"),u(!1),V(null),b({title:"",description:"",category:"",visibility:"PRIVATE"}),P()}catch(t){const o=t.message||t.response?.data?.message||"Failed to upload document";if(await k(),o.toLowerCase().includes("consent"))a.error("Consent is required. Please grant consent first."),E(!0);else if(o.toLowerCase().includes("google drive")||o.toLowerCase().includes("not authorized")||o.toLowerCase().includes("oauth")||o.toLowerCase().includes("token")){a.error("Google Drive connection required. Please connect your Google Drive first.");try{const j=await q.getAuthorizationUrl();window.location.href=j}catch{a.error("Failed to initiate Google Drive connection. Please try again.")}}else a.error(o)}finally{de(!1)}},ue=async s=>{const t=s.id||String(s.documentId);if(t)try{await w.toggleShowOnWebsite(t),a.success(s.showOnWebsite?"Document removed from public website":"Document added to public website"),P()}catch(o){a.error(o.message||"Failed to update document")}},Ue=s=>{z(s),N({title:s.title,description:s.description||"",category:s.category,visibility:s.visibility||s.isPublic?"PUBLIC":"PRIVATE"}),F(!0)},Te=async()=>{if(!W||!l.title||!l.category){a.error("Please fill all required fields");return}try{const s=W.id||String(W.documentId);await w.update(s,{title:l.title,description:l.description,category:l.category,visibility:l.visibility}),a.success("Document updated successfully"),F(!1),z(null),P()}catch(s){a.error(s.message||"Failed to update document")}},he=async s=>{if(confirm("Are you sure you want to delete this document? This will also delete it from your Google Drive."))try{await w.delete(s||String(v.find(t=>t.documentId?.toString()===s||t.id===s)?.documentId||s)),a.success("Document deleted successfully"),P()}catch(t){a.error(t.message||"Failed to delete document")}},xe=async s=>{if(!s.isAvailable){a.error("This document is no longer available");return}if(s.viewLink){me(s),R(!0);return}if(s.id||s.documentId)try{const t=await w.getViewLink(s.id||String(s.documentId));if(t){const o={...s,viewLink:t};me(o),R(!0)}else a.error("Document view link not available")}catch(t){a.error(t.message||"Failed to get document view link")}else a.error("Document not available")},ge=s=>{if(s===0)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(s)/Math.log(t));return Math.round(s/Math.pow(t,j)*100)/100+" "+o[j]},Y=[{value:"NOTICE",label:"Notice"},{value:"REPORT",label:"Report"},{value:"BUDGET",label:"Budget"},{value:"TENDER",label:"Tender"},{value:"FORM",label:"Form"},{value:"RESOLUTION",label:"Resolution"},{value:"OTHER",label:"Other"}],L=v.filter(s=>s.title.toLowerCase().includes(M.toLowerCase())||s.description?.toLowerCase().includes(M.toLowerCase()));return y||D?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#FF9933] mx-auto"}),e.jsx("p",{className:"mt-4 text-[#666]",children:"Loading documents..."})]})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-[#1B2B5E]",children:"Documents Management"}),e.jsx("p",{className:"text-sm sm:text-base text-[#666] mt-1",children:"Upload and manage panchayat documents"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[!c&&e.jsxs(n,{variant:"outline",onClick:()=>E(!0),className:"w-full sm:w-auto",children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Grant Consent"]}),e.jsxs(n,{onClick:Fe,className:"w-full sm:w-auto",disabled:!c||!p||y,title:y?"Checking status...":c?p?"Upload document":"Connect Google Drive first":"Grant consent first",children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Upload Document",y&&e.jsx("span",{className:"ml-2 text-xs",children:"(checking...)"})]})]})]}),e.jsxs(pe,{children:[e.jsx(Oe,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(_e,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#666]"}),e.jsx(T,{placeholder:"Search documents...",value:M,onChange:s=>Pe(s.target.value),className:"pl-10"})]}),e.jsxs(_,{value:B,onValueChange:Ie,children:[e.jsxs($,{className:"w-full sm:w-[180px]",children:[e.jsx($e,{className:"h-4 w-4 mr-2"}),e.jsx(Q,{placeholder:"Filter by category"})]}),e.jsxs(K,{children:[e.jsx(A,{value:"all",children:"All Categories"}),Y.map(s=>e.jsx(A,{value:s.value,children:s.label},s.value))]})]})]})}),e.jsxs(je,{children:[e.jsx("div",{className:"block sm:hidden space-y-3",children:L.length===0?e.jsx("div",{className:"text-center py-8 text-[#666] text-sm",children:"No documents found. Upload your first document."}):L.map(s=>e.jsx(pe,{children:e.jsx(je,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(le,{className:"h-4 w-4 text-[#666]"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate",children:s.fileName})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[e.jsx(x,{variant:"outline",className:"text-xs",children:s.category}),e.jsx(x,{variant:(s.visibility||s.isPublic)==="PUBLIC"?"default":"secondary",className:"text-xs",children:(s.visibility||s.isPublic)==="PUBLIC"?"Public":"Private"}),s.showOnWebsite&&e.jsxs(x,{variant:"default",className:"text-xs bg-[#138808]",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"On Website"]}),!s.isAvailable&&e.jsx(x,{variant:"destructive",className:"text-xs",children:"Unavailable"}),e.jsx("span",{className:"text-muted-foreground",children:ge(s.fileSize||0)}),e.jsx("span",{className:"text-muted-foreground",children:"â€¢"}),e.jsx("span",{className:"text-muted-foreground",children:ve(s.uploadedAt||s.createdAt||"")})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[e.jsxs(n,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>xe(s),disabled:!s.isAvailable,children:[e.jsx(be,{className:"mr-2 h-3 w-3"}),"View"]}),e.jsxs(n,{variant:s.showOnWebsite?"default":"outline",size:"sm",className:"flex-1",onClick:()=>ue(s),disabled:!s.isAvailable||s.visibility!=="PUBLIC",title:s.visibility!=="PUBLIC"?"Make document public first":s.showOnWebsite?"Remove from website":"Show on website",children:[e.jsx(U,{className:"mr-2 h-3 w-3"}),s.showOnWebsite?"On Website":"Add to Website"]}),e.jsxs(n,{variant:"outline",size:"sm",className:"flex-1 text-destructive",onClick:()=>he(s.id||String(s.documentId)),children:[e.jsx(Ne,{className:"mr-2 h-3 w-3"}),"Delete"]})]})]})})},s.id||s.documentId||`doc-${s.title}-${s.createdAt}`))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs(We,{children:[e.jsx(ze,{children:e.jsxs(H,{children:[e.jsx(f,{children:"Title"}),e.jsx(f,{children:"Category"}),e.jsx(f,{children:"File"}),e.jsx(f,{children:"Size"}),e.jsx(f,{children:"Visibility"}),e.jsx(f,{children:"Uploaded"}),e.jsx(f,{className:"text-right",children:"Actions"})]})}),e.jsx(Me,{children:L.length===0?e.jsx(H,{children:e.jsx(h,{colSpan:7,className:"text-center py-8 text-[#666]",children:"No documents found. Upload your first document."})}):L.map(s=>e.jsxs(H,{children:[e.jsx(h,{className:"font-medium",children:s.title}),e.jsx(h,{children:e.jsx(x,{variant:"outline",children:s.category})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"h-4 w-4 text-[#666]"}),e.jsx("span",{className:"text-sm text-[#666]",children:s.fileName})]})}),e.jsx(h,{className:"text-sm text-[#666]",children:ge(s.fileSize)}),e.jsxs(h,{children:[e.jsx(x,{variant:(s.visibility||s.isPublic)==="PUBLIC"?"default":"secondary",children:(s.visibility||s.isPublic)==="PUBLIC"?"Public":"Private"}),s.showOnWebsite&&e.jsxs(x,{variant:"default",className:"ml-2 bg-[#138808]",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),"On Website"]}),!s.isAvailable&&e.jsx(x,{variant:"destructive",className:"ml-2",children:"Unavailable"})]}),e.jsx(h,{className:"text-sm text-[#666]",children:ve(s.uploadedAt||s.createdAt||"")}),e.jsx(h,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>xe(s),disabled:!s.isAvailable,title:"View document",children:e.jsx(be,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>Ue(s),title:"Edit document",children:e.jsx(we,{className:"h-4 w-4"})}),e.jsx(n,{variant:s.showOnWebsite?"default":"ghost",size:"icon",onClick:()=>ue(s),disabled:!s.isAvailable||s.visibility!=="PUBLIC",title:s.visibility!=="PUBLIC"?"Make document public first":s.showOnWebsite?"Remove from website":"Show on website",children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(n,{variant:"ghost",size:"icon",className:"text-red-600",onClick:()=>he(s.id||String(s.documentId)),title:"Delete document",children:e.jsx(Ne,{className:"h-4 w-4"})})]})})]},s.id||s.documentId||`doc-${s.title}-${s.createdAt}`))})]})})]})]}),e.jsx(X,{open:O,onOpenChange:u,children:e.jsxs(Z,{className:"max-w-2xl max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Upload Document"}),e.jsx(te,{children:"Upload a new document to your panchayat"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"file",children:"File *"}),e.jsx(T,{id:"file",type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx",onChange:s=>V(s.target.files?.[0]||null)}),I&&e.jsxs("p",{className:"text-sm text-[#666]",children:["Selected: ",I.name]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"title",children:"Title *"}),e.jsx(T,{id:"title",placeholder:"Enter document title",value:r.title,onChange:s=>b({...r,title:s.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(fe,{id:"description",placeholder:"Enter document description",value:r.description,onChange:s=>b({...r,description:s.target.value}),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"category",children:"Category *"}),e.jsxs(_,{value:r.category,onValueChange:s=>b({...r,category:s}),children:[e.jsx($,{children:e.jsx(Q,{placeholder:"Select category"})}),e.jsx(K,{children:Y.map(s=>e.jsx(A,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{id:"isPublic",checked:r.visibility==="PUBLIC",onCheckedChange:s=>b({...r,visibility:s?"PUBLIC":"PRIVATE"})}),e.jsx(d,{htmlFor:"isPublic",className:"cursor-pointer",children:"Make this document public"})]}),(!c||!p)&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(J,{className:"h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-xs text-yellow-800",children:[!c&&!p&&e.jsx("p",{children:"You need to grant consent and connect Google Drive before uploading documents."}),!c&&p&&e.jsx("p",{children:"You need to grant consent before uploading documents."}),c&&!p&&e.jsx("p",{children:"You need to connect Google Drive before uploading documents."})]})]})})]}),e.jsxs(ae,{children:[e.jsx(n,{variant:"outline",type:"button",onClick:()=>{u(!1),V(null),b({title:"",description:"",category:"",visibility:"PRIVATE"})},children:"Cancel"}),e.jsx(n,{type:"button",onClick:s=>Le(s),disabled:ce||!c||!p,children:ce?e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"h-4 w-4 mr-2"}),"Upload to Google Drive"]})})]})]})}),e.jsx(X,{open:ke,onOpenChange:F,children:e.jsxs(Z,{className:"sm:max-w-[500px]",children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Edit Document"}),e.jsx(te,{children:"Update document details. Changes will be saved immediately."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-title",children:"Title *"}),e.jsx(T,{id:"edit-title",value:l.title,onChange:s=>N({...l,title:s.target.value}),placeholder:"Enter document title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-description",children:"Description"}),e.jsx(fe,{id:"edit-description",value:l.description,onChange:s=>N({...l,description:s.target.value}),placeholder:"Enter document description (optional)",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"edit-category",children:"Category *"}),e.jsxs(_,{value:l.category,onValueChange:s=>N({...l,category:s}),children:[e.jsx($,{children:e.jsx(Q,{placeholder:"Select category"})}),e.jsx(K,{children:Y.map(s=>e.jsx(A,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ie,{id:"edit-isPublic",checked:l.visibility==="PUBLIC",onCheckedChange:s=>N({...l,visibility:s?"PUBLIC":"PRIVATE"})}),e.jsx(d,{htmlFor:"edit-isPublic",className:"cursor-pointer",children:"Make this document public"})]})]}),e.jsxs(ae,{children:[e.jsx(n,{variant:"outline",type:"button",onClick:()=>{F(!1),z(null),N({title:"",description:"",category:"",visibility:"PRIVATE"})},children:"Cancel"}),e.jsxs(n,{type:"button",onClick:Te,disabled:!l.title||!l.category,children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Update Document"]})]})]})}),e.jsx(Je,{open:De,onOpenChange:E,onConsentGranted:Be}),e.jsx(He,{document:Se,open:Ee,onOpenChange:R})]})}function vs(){const{user:m}=Re();return m?.panchayatId?e.jsx(Xe,{panchayatId:m.panchayatId}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"Loading..."})}export{vs as DocumentsPage};
