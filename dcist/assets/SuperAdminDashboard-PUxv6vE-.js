import{r as d,aC as w,t as n,j as e,B as m,C as y,b as N,u as Re,x as Ie,a as $e,aD as k,G as Ce,X as oe,F as We,D as ae,n as le,o as ie,q as S,d as Y,e as re,f as He,aE as Pe}from"./index-B5GP4ZU0.js";import{I as L}from"./input-C4RtHFee.js";import{L as $}from"./label-k4a1c30R.js";import{T as Fe}from"./textarea-DqFXOEs1.js";import{T as me,a as xe,b as _,c as x,d as he,e as h}from"./table-BDHQV-gI.js";import{B as E}from"./badge-ALW9Fyqs.js";import{D as ke,a as Le,b as Ue,c as Oe,d as Me,e as Ge}from"./dialog-D8fBtqfZ.js";import{S as ge,a as fe,b as ve,c as ye,d as U}from"./select-dEcH2o1V.js";import{f as ue}from"./format-MGXwiYcE.js";import{S as qe,G as Qe,C as Ke}from"./SectionEditor-nBt1O9M1.js";import{D as Xe}from"./DynamicSectionRenderer-DnALxJmT.js";import{p as Ye,i as _e,I as Je}from"./ImageWithFallback-CPTj3iC7.js";import{P as Ne}from"./plus-BdOJHdON.js";import{S as be}from"./search-JXwptwBL.js";import{F as Be}from"./funnel-Cii8H73m.js";import{E as De}from"./eye-BsbdD2Tc.js";import{E as Ze}from"./eye-off-pVSqCzBV.js";import{S as J,T as we}from"./trash-2-Dvt3QX8d.js";import{B as je}from"./building-2-Dv7kGGrs.js";import{U as Ae}from"./users-BuGIPw5K.js";import{F as Te}from"./file-text-DFT2MlA2.js";import{L as es,a as ss}from"./log-out-DFPfvCZD.js";import{C as ts}from"./chart-column-64PLYjxS.js";import{E as pe}from"./ellipsis-vertical-BPQDY5HV.js";import"./check-BfJ-MShT.js";import"./checkbox-sHSxgcd9.js";import"./images-DNiRzA5N.js";import"./list-CUSQgfHx.js";import"./tabs-C4k9DC07.js";import"./upload-wi-AKsz6.js";import"./clock-C1_AbEPp.js";import"./trending-up-CPnljwFl.js";function as({section:l,index:b,totalSections:W,onEdit:O,onDelete:M,onToggleVisibility:u,onMoveUp:Q,onMoveDown:C,onDuplicate:B,onDragStart:P,onDragOver:F,onDrop:D,isDragging:V}){const[p,z]=d.useState(!1),H=g=>({HERO:"bg-blue-100 text-blue-800",STATS:"bg-green-100 text-green-800",FEATURES:"bg-purple-100 text-purple-800",GALLERY:"bg-purple-100 text-purple-800",FAQ:"bg-orange-100 text-orange-800",FORM:"bg-pink-100 text-pink-800",VIDEO:"bg-red-100 text-red-800",TESTIMONIALS:"bg-yellow-100 text-yellow-800",NEWS:"bg-cyan-100 text-cyan-800",CTA:"bg-indigo-100 text-indigo-800"})[g]||"bg-gray-100 text-gray-800";return e.jsx("div",{draggable:!0,onDragStart:g=>P(g,b),onDragOver:F,onDrop:g=>D(g,b),className:`bg-white rounded-lg border-2 transition-all ${V?"border-primary opacity-50":"border-[#E5E5E5] hover:border-primary/50"}`,children:e.jsxs("div",{className:"p-3 sm:p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:[e.jsx("div",{className:"cursor-move text-muted-foreground hover:text-primary",children:e.jsx(Qe,{className:"h-4 w-4 sm:h-5 sm:w-5"})}),e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded border border-[#E5E5E5] overflow-hidden bg-gray-50 flex items-center justify-center",children:l.imageUrl?e.jsx(Je,{src:l.imageUrl,alt:l.title||l.sectionType,className:"w-full h-full object-cover"}):e.jsx("div",{className:`w-full h-full flex items-center justify-center ${H(l.sectionType)}`,children:e.jsx("span",{className:"text-[10px] sm:text-xs font-semibold",children:l.sectionType.substring(0,3)})})})]}),e.jsxs("div",{className:"flex-1 min-w-0 w-full sm:w-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1.5 sm:gap-2 flex-wrap",children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold truncate",children:l.title||l.sectionType}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 flex-wrap",children:[e.jsx(E,{variant:"outline",className:`text-[10px] sm:text-xs ${H(l.sectionType)}`,children:l.sectionType}),e.jsx(E,{variant:"outline",className:"text-[10px] sm:text-xs",children:l.layoutType}),!l.isVisible&&e.jsx(E,{variant:"secondary",className:"text-[10px] sm:text-xs",children:"Hidden"})]})]}),l.subtitle&&e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1 truncate",children:l.subtitle}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mt-1.5 sm:mt-2 text-[10px] sm:text-xs text-muted-foreground flex-wrap",children:[e.jsxs("span",{children:["Order: ",l.displayOrder]}),l.content?.items&&e.jsxs("span",{children:["• ",l.content.items.length," item",l.content.items.length!==1?"s":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-0.5 sm:gap-1 flex-shrink-0 w-full sm:w-auto justify-end sm:justify-start",children:[e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>z(!p),title:"Preview",className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(De,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>u(l.id),title:l.isVisible?"Hide":"Show",className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:l.isVisible?e.jsx(De,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"}):e.jsx(Ze,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>B(l.id),title:"Duplicate",className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(Ke,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>O(l),title:"Edit",className:"h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(J,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})}),e.jsx(m,{variant:"ghost",size:"sm",onClick:()=>M(l.id),className:"text-destructive hover:text-destructive h-8 w-8 sm:h-9 sm:w-9 p-0",title:"Delete",children:e.jsx(we,{className:"h-3.5 w-3.5 sm:h-4 sm:w-4"})})]})]}),p&&e.jsx("div",{className:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-[#E5E5E5]",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 sm:p-4 max-h-48 sm:max-h-64 overflow-auto",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mb-2",children:"Preview:"}),e.jsx("div",{className:"scale-[0.65] sm:scale-75 origin-top-left",children:e.jsx(Xe,{section:l})})]})})]})})}function ls(){const[l,b]=d.useState([]),[W,O]=d.useState([]),[M,u]=d.useState(!0),[Q,C]=d.useState(!1),[B,P]=d.useState(null),[F,D]=d.useState(""),[V,p]=d.useState("all"),[z,H]=d.useState("all"),[g,A]=d.useState(null);d.useEffect(()=>{j()},[]),d.useEffect(()=>{Z()},[l,F,V,z]);const Z=()=>{let a=[...l];F&&(a=a.filter(t=>t.title?.toLowerCase().includes(F.toLowerCase())||t.sectionType.toLowerCase().includes(F.toLowerCase())||t.subtitle?.toLowerCase().includes(F.toLowerCase()))),V!=="all"&&(a=a.filter(t=>t.sectionType===V)),z!=="all"&&(a=a.filter(t=>z==="visible"?t.isVisible:!t.isVisible)),O(a)},j=async()=>{try{u(!0);const t=(await w.getSections()).map(r=>({...r,content:typeof r.content=="object"?Ye(r.content):r.content,imageUrl:r.imageUrl&&!_e(r.imageUrl)?r.imageUrl:null}));b(t.sort((r,o)=>r.displayOrder-o.displayOrder))}catch(a){n.error("Failed to load sections: "+(a.message||"Unknown error"))}finally{u(!1)}},ee=()=>{P(null),C(!0)},K=a=>{P(a),C(!0)},G=async a=>{try{let t;return B?t=await w.updateSection(B.id,a):t=await w.createSection(a),C(!1),P(null),await j(),t}catch(t){throw t}},ce=async a=>{if(confirm("Are you sure you want to delete this section? This action cannot be undone."))try{await w.deleteSection(a),n.success("Section deleted successfully"),await j()}catch(t){n.error("Failed to delete section: "+(t.message||"Unknown error"))}},q=async a=>{try{const t=l.find(o=>o.id===a);if(!t)return;const r={sectionType:t.sectionType,title:`${t.title} (Copy)`,subtitle:t.subtitle,content:t.content,layoutType:t.layoutType,displayOrder:l.length,isVisible:!1,backgroundColor:t.backgroundColor,textColor:t.textColor,imageUrl:t.imageUrl,imageKey:t.imageKey,metadata:t.metadata};await w.createSection(r),n.success("Section duplicated successfully"),await j()}catch(t){n.error("Failed to duplicate section: "+(t.message||"Unknown error"))}},R=async a=>{try{const t=l.find(r=>r.id===a);t&&(await w.toggleVisibility(a,t.isVisible),n.success("Visibility updated"),await j())}catch(t){n.error("Failed to update visibility: "+(t.message||"Unknown error"))}},X=async a=>{const t=l.findIndex(o=>o.id===a);if(t===0)return;const r=[...l];[r[t-1],r[t]]=[r[t],r[t-1]],b(r);try{await w.updateOrder(r[t].id,t),await w.updateOrder(r[t-1].id,t-1),n.success("Order updated successfully"),await j()}catch(o){n.error("Failed to update order: "+(o.message||"Unknown error")),await j()}},i=async a=>{const t=l.findIndex(o=>o.id===a);if(t===l.length-1)return;const r=[...l];[r[t],r[t+1]]=[r[t+1],r[t]],b(r);try{await w.updateOrder(r[t].id,t),await w.updateOrder(r[t+1].id,t+1),n.success("Order updated successfully"),await j()}catch(o){n.error("Failed to update order: "+(o.message||"Unknown error")),await j()}},f=(a,t)=>{A(t),a.dataTransfer.effectAllowed="move",a.dataTransfer.setData("text/html",t.toString())},T=a=>{a.preventDefault(),a.dataTransfer.dropEffect="move"},ne=async(a,t)=>{if(a.preventDefault(),g===null||g===t){A(null);return}const r=[...l],o=r[g];r.splice(g,1),r.splice(t,0,o),b(r),A(null);try{for(let I=0;I<r.length;I++)await w.updateOrder(r[I].id,I);n.success("Order updated successfully"),await j()}catch(I){n.error("Failed to update order: "+(I.message||"Unknown error")),await j()}},se=Array.from(new Set(l.map(a=>a.sectionType)));return M?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading sections..."})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Platform Landing Page"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage sections for the main platform landing page"})]}),e.jsxs(m,{onClick:ee,className:"w-full sm:w-auto",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Add Section"]})]}),l.length>0&&e.jsx(y,{children:e.jsx(N,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(L,{placeholder:"Search sections...",value:F,onChange:a=>D(a.target.value),className:"pl-10 text-sm sm:text-base"})]}),e.jsxs(ge,{value:V,onValueChange:p,children:[e.jsxs(fe,{className:"w-full sm:w-[180px] text-sm sm:text-base",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),e.jsx(ve,{placeholder:"Filter by type"})]}),e.jsxs(ye,{children:[e.jsx(U,{value:"all",children:"All Types"}),se.map(a=>e.jsx(U,{value:a,children:a},a))]})]}),e.jsxs(ge,{value:z,onValueChange:H,children:[e.jsx(fe,{className:"w-full sm:w-[180px] text-sm sm:text-base",children:e.jsx(ve,{placeholder:"Filter by visibility"})}),e.jsxs(ye,{children:[e.jsx(U,{value:"all",children:"All"}),e.jsx(U,{value:"visible",children:"Visible"}),e.jsx(U,{value:"hidden",children:"Hidden"})]})]})]})})}),l.length===0?e.jsx(y,{children:e.jsxs(N,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No sections yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Create your first section to start building the platform landing page"}),e.jsxs(m,{onClick:ee,children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Create First Section"]})]})}):W.length===0?e.jsx(y,{children:e.jsxs(N,{className:"py-12 text-center",children:[e.jsx("p",{className:"text-muted-foreground",children:"No sections match your filters"}),e.jsx(m,{variant:"outline",className:"mt-4",onClick:()=>{D(""),p("all"),H("all")},children:"Clear Filters"})]})}):e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 text-xs sm:text-sm text-muted-foreground",children:[e.jsxs("span",{children:[W.length," of ",l.length," section",W.length!==1?"s":""]}),e.jsx("span",{className:"hidden sm:inline",children:"Drag sections to reorder"}),e.jsx("span",{className:"sm:hidden",children:"Drag to reorder"})]}),W.map((a,t)=>{const r=l.findIndex(o=>o.id===a.id);return e.jsx(as,{section:a,index:r,totalSections:l.length,onEdit:K,onDelete:ce,onToggleVisibility:R,onMoveUp:X,onMoveDown:i,onDuplicate:q,onDragStart:f,onDragOver:T,onDrop:ne,isDragging:g===r},a.id)})]}),e.jsx(ke,{open:Q,onOpenChange:C,children:e.jsxs(Le,{className:"max-w-[95vw] sm:max-w-7xl lg:max-w-[90vw] max-h-[95vh] overflow-y-auto p-4 sm:p-6 lg:p-8",children:[e.jsxs(Ue,{children:[e.jsx(Oe,{children:B?"Edit Section":"Create New Section"}),e.jsx(Me,{children:"Configure the section content, layout, and styling. Use the tabs to organize different aspects of your section."})]}),e.jsx(qe,{section:B,isPlatform:!0,onSave:G,onCancel:()=>{C(!1),P(null)},isOpen:Q})]})})]})}function Bs(){const l=Re(),{user:b,logout:W}=Ie(),{t:O,i18n:M}=$e(),[u,Q]=d.useState("dashboard"),[C,B]=d.useState([]),[P,F]=d.useState([]),[D,V]=d.useState([]),[p,z]=d.useState({totalPanchayats:0,totalUsers:0,activePanchayats:0,totalPosts:0,totalSchemes:0}),[H,g]=d.useState(!0),[A,Z]=d.useState(""),[j,ee]=d.useState("all"),[K,G]=d.useState(!1),[ce,q]=d.useState(!1),[R,X]=d.useState(null),[i,f]=d.useState({panchayatName:"",slug:"",district:"",state:"",address:"",contactPhone:"",contactEmail:"",description:""});d.useEffect(()=>{if(b?.role!=="SUPER_ADMIN"){l("/dashboard");return}T()},[b,l]);const T=async()=>{g(!0);try{const[s,c,v,de]=await Promise.all([k.getAllPanchayats({status:j!=="all"?j:void 0,search:A||void 0}),k.getAllUsers(),k.getSystemAnalytics(),k.getAuditLogs()]);B(s),F(c),z(v),V(de)}catch(s){console.error("Error fetching dashboard data:",s),n.error("Failed to load dashboard data")}finally{g(!1)}};d.useEffect(()=>{(u==="panchayats"||u==="users")&&T()},[A,j]);const ne=async()=>{await W(),l("/login")},se=async(s,c)=>{try{await k.updatePanchayatStatus(s,c),n.success(`Panchayat ${c==="active"?"activated":"deactivated"} successfully`),T()}catch{n.error("Failed to update panchayat status")}},a=async(s,c)=>{let v=0;try{v=(await Pe.getStats(parseInt(s))).totalUsers||0}catch(te){console.warn("Failed to fetch panchayat stats:",te)}const de=v>0?`Are you sure you want to DEACTIVATE "${c}"?

⚠️ WARNING: This will:
• Mark the panchayat as inactive
• Mark all ${v} user(s) associated with this panchayat as inactive
• Users will be deactivated in the background

The panchayat and users can be reactivated later if needed.`:`Are you sure you want to DEACTIVATE "${c}"?

⚠️ WARNING: This will mark the panchayat as inactive.

The panchayat can be reactivated later if needed.`;if(confirm(de))try{await k.deletePanchayat(s),n.success(v>0?`Panchayat deactivated successfully. ${v} user(s) are being deactivated in the background.`:"Panchayat deactivated successfully"),T()}catch(te){n.error(te.message||"Failed to deactivate panchayat")}},t=()=>{X(null),f({panchayatName:"",slug:"",district:"",state:"",address:"",contactPhone:"",contactEmail:"",description:""}),q(!0)},r=async s=>{try{const c=await Pe.getById(parseInt(s.id));X(s),f({panchayatName:c.panchayatName||s.panchayatName,slug:c.slug||s.slug,district:c.district||s.district,state:c.state||s.state,address:c.address||c.officeAddress||"",contactPhone:c.contactPhone||c.officePhone||"",contactEmail:c.contactEmail||c.officeEmail||"",description:c.description||""}),q(!0)}catch(c){console.error("Error loading panchayat:",c),X(s),f({panchayatName:s.panchayatName,slug:s.slug,district:s.district,state:s.state,address:"",contactPhone:"",contactEmail:"",description:""}),q(!0)}},o=()=>{q(!1),X(null),f({panchayatName:"",slug:"",district:"",state:"",address:"",contactPhone:"",contactEmail:"",description:""})},I=async()=>{if(!i.panchayatName.trim()){n.error("Please enter panchayat name");return}if(!i.slug.trim()){n.error("Please enter subdomain/slug");return}if(!i.district.trim()){n.error("Please enter district");return}if(!i.state.trim()){n.error("Please enter state");return}if(!/^[a-z0-9-]+$/.test(i.slug.toLowerCase())){n.error("Subdomain can only contain lowercase letters, numbers, and hyphens");return}try{await k.createPanchayat({panchayatName:i.panchayatName.trim(),slug:i.slug.toLowerCase().trim(),district:i.district.trim(),state:i.state.trim(),address:i.address.trim()||void 0,contactPhone:i.contactPhone.trim()||void 0,contactEmail:i.contactEmail.trim()||void 0,description:i.description.trim()||void 0}),n.success("Panchayat created successfully"),o(),T()}catch(c){const v=c instanceof Error?c.message:"Failed to create panchayat";n.error(v)}},Ve=async()=>{if(!R)return;if(!i.panchayatName.trim()){n.error("Please enter panchayat name");return}if(!i.slug.trim()){n.error("Please enter subdomain/slug");return}if(!i.district.trim()){n.error("Please enter district");return}if(!i.state.trim()){n.error("Please enter state");return}if(!/^[a-z0-9-]+$/.test(i.slug.toLowerCase())){n.error("Subdomain can only contain lowercase letters, numbers, and hyphens");return}try{await k.updatePanchayat(R.id,{panchayatName:i.panchayatName.trim(),slug:i.slug.toLowerCase().trim(),district:i.district.trim(),state:i.state.trim(),address:i.address.trim()||void 0,contactPhone:i.contactPhone.trim()||void 0,contactEmail:i.contactEmail.trim()||void 0,description:i.description.trim()||void 0}),n.success("Panchayat updated successfully"),o(),T()}catch(c){const v=c instanceof Error?c.message:"Failed to update panchayat";n.error(v)}},Se=async(s,c)=>{try{await k.updateUserStatus(s,c),n.success(`User ${c==="active"?"activated":"deactivated"} successfully`),T()}catch{n.error("Failed to update user status")}},Ee=[{id:"dashboard",label:"Dashboard",icon:es},{id:"panchayats",label:"Panchayats",icon:je},{id:"users",label:"Users",icon:Ae},{id:"landing-page",label:"Landing Page",icon:Ce},{id:"analytics",label:"Analytics",icon:ts},{id:"audit-logs",label:"Audit Logs",icon:Te}],ze=[{label:"Total Panchayats",value:p.totalPanchayats.toString(),icon:je,color:"#FF9933"},{label:"Active Panchayats",value:p.activePanchayats.toString(),icon:je,color:"#138808"},{label:"Total Users",value:p.totalUsers.toString(),icon:Ae,color:"#FF9933"},{label:"Total Posts",value:p.totalPosts.toString(),icon:Te,color:"#138808"}];return H&&u==="dashboard"?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#E31E24] mx-auto"}),e.jsx("p",{className:"mt-4 text-[#666]",children:"Loading dashboard..."})]})}):e.jsxs("div",{className:"min-h-screen bg-[#F5F5F5]",children:[K&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 lg:hidden",onClick:()=>G(!1)}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:"hidden w-64 border-r border-[#E5E5E5] bg-white shadow-sm lg:block h-full",children:[e.jsxs("div",{className:"flex h-16 items-center gap-3 border-b border-[#E5E5E5] px-6",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-[#FF9933] via-white to-[#138808] p-[2px]",children:e.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-md bg-white",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#138808"}),e.jsx("path",{d:"M12 4 L12 20 M4 12 L20 12",stroke:"white",strokeWidth:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#FF9933"})]})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-[#1B2B5E]",children:"Super Admin"}),e.jsx("p",{className:"text-xs text-[#666]",children:"Platform Dashboard"})]})]}),e.jsx("nav",{className:"space-y-1 p-4",children:Ee.map(s=>{const c=s.icon;return e.jsxs("button",{onClick:()=>{Q(s.id),G(!1)},className:`flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-colors ${u===s.id?"bg-[#E31E24] text-white font-medium shadow-sm":"text-[#666] hover:bg-[#F5F5F5] hover:text-[#1B2B5E]"}`,children:[e.jsx(c,{className:"h-5 w-5"}),e.jsx("span",{children:s.label})]},s.id)})})]}),e.jsxs("aside",{className:`fixed inset-y-0 left-0 z-50 w-64 border-r border-[#E5E5E5] bg-white shadow-lg transition-transform lg:hidden ${K?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"flex h-16 items-center justify-between gap-3 border-b border-[#E5E5E5] px-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-gradient-to-br from-[#FF9933] via-white to-[#138808] p-[2px]",children:e.jsx("div",{className:"flex h-full w-full items-center justify-center rounded-md bg-white",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#138808"}),e.jsx("path",{d:"M12 4 L12 20 M4 12 L20 12",stroke:"white",strokeWidth:"2"}),e.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"#FF9933"})]})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-[#1B2B5E]",children:"Super Admin"}),e.jsx("p",{className:"text-xs text-[#666]",children:"Platform Dashboard"})]})]}),e.jsx(m,{variant:"ghost",size:"icon",onClick:()=>G(!1),className:"lg:hidden",children:e.jsx(oe,{className:"h-5 w-5"})})]}),e.jsx("nav",{className:"space-y-1 p-4 overflow-y-auto h-[calc(100vh-4rem)]",children:Ee.map(s=>{const c=s.icon;return e.jsxs("button",{onClick:()=>{Q(s.id),G(!1)},className:`flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-colors ${u===s.id?"bg-[#E31E24] text-white font-medium shadow-sm":"text-[#666] hover:bg-[#F5F5F5] hover:text-[#1B2B5E]"}`,children:[e.jsx(c,{className:"h-5 w-5"}),e.jsx("span",{children:s.label})]},s.id)})})]}),e.jsxs("div",{className:"flex-1 w-0 min-w-0",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b border-[#E5E5E5] bg-white shadow-sm",children:e.jsxs("div",{className:"flex h-16 items-center justify-between px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(m,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>G(!K),children:K?e.jsx(oe,{}):e.jsx(We,{})}),e.jsx("h1",{className:"text-sm md:text-xl font-bold text-[#1B2B5E]",children:"Super Admin Dashboard"})]}),e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsxs(ae,{children:[e.jsx(le,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",className:"h-9 w-9",children:e.jsx(Ce,{className:"h-5 w-5 text-[#666]"})})}),e.jsxs(ie,{align:"end",children:[e.jsx(S,{onClick:()=>M.changeLanguage("en"),children:O("panchayatWebsite.languages.english")}),e.jsx(S,{onClick:()=>M.changeLanguage("mr"),children:O("panchayatWebsite.languages.marathi")}),e.jsx(S,{onClick:()=>M.changeLanguage("hi"),children:O("panchayatWebsite.languages.hindi")}),e.jsx(S,{onClick:()=>M.changeLanguage("regional"),children:O("panchayatWebsite.languages.regional")})]})]}),e.jsx("span",{className:"hidden text-sm text-[#666] sm:inline",children:b?.name}),e.jsxs(m,{variant:"outline",size:"sm",onClick:ne,className:"border-[#E5E5E5] text-[#666] hover:bg-[#F5F5F5]",children:[e.jsx(ss,{className:"h-4 w-4 mr-2"}),"Logout"]})]})]})}),e.jsx("div",{className:"p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[u==="dashboard"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-[#1B2B5E]",children:"Platform Overview"}),e.jsx("p",{className:"text-sm sm:text-base text-[#666] mt-1",children:"Monitor and manage the entire platform"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6",children:ze.map(s=>{const c=s.icon;return e.jsxs(y,{children:[e.jsxs(Y,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(re,{className:"text-sm font-medium text-[#666]",children:s.label}),e.jsx(c,{className:"h-5 w-5",style:{color:s.color}})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl sm:text-3xl font-bold",style:{color:s.color},children:s.value})})]},s.label)})}),e.jsxs(y,{children:[e.jsxs(Y,{children:[e.jsx(re,{className:"text-base sm:text-lg",children:"Recent Activity"}),e.jsx(He,{className:"text-xs sm:text-sm",children:"Latest system activities and changes"})]}),e.jsx(N,{children:e.jsx("div",{className:"space-y-3 sm:space-y-4",children:D.slice(0,10).map(s=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-0 py-2 border-b last:border-0",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm sm:text-base font-medium truncate",children:s.userName}),e.jsxs("p",{className:"text-xs sm:text-sm text-[#666] truncate",children:[s.action," ",s.resource]})]}),e.jsx("span",{className:"text-xs sm:text-sm text-[#666] flex-shrink-0",children:ue(s.createdAt)})]},s.id))})})]})]}),u==="panchayats"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-[#1B2B5E]",children:"Panchayat Management"}),e.jsx("p",{className:"text-sm sm:text-base text-[#666] mt-1",children:"Manage all registered panchayats"})]}),e.jsxs(m,{onClick:t,className:"w-full sm:w-auto",children:[e.jsx(Ne,{className:"h-4 w-4 mr-2"}),"Add Panchayat"]})]}),e.jsxs(y,{children:[e.jsx(Y,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#666]"}),e.jsx(L,{placeholder:"Search panchayats...",value:A,onChange:s=>Z(s.target.value),className:"pl-10"})]}),e.jsxs(ge,{value:j,onValueChange:s=>ee(s),children:[e.jsxs(fe,{className:"w-full sm:w-[180px]",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),e.jsx(ve,{placeholder:"Filter by status"})]}),e.jsxs(ye,{children:[e.jsx(U,{value:"all",children:"All Status"}),e.jsx(U,{value:"active",children:"Active"}),e.jsx(U,{value:"inactive",children:"Inactive"}),e.jsx(U,{value:"suspended",children:"Suspended"})]})]})]})}),e.jsxs(N,{children:[e.jsx("div",{className:"block sm:hidden space-y-3",children:C.length===0?e.jsx("div",{className:"text-center py-8 text-[#666] text-sm",children:"No panchayats found"}):C.map(s=>e.jsx(y,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.panchayatName}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.slug})]}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{children:["Location: ",s.district,","," ",s.state]}),e.jsxs("div",{children:["Admins: ",s.adminCount]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx(E,{variant:s.status==="active"?"default":"secondary",className:"text-xs",children:s.status}),e.jsxs(ae,{children:[e.jsx(le,{asChild:!0,children:e.jsx(m,{variant:"outline",size:"sm",children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsxs(ie,{align:"end",children:[e.jsxs(S,{onClick:()=>r(s),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(S,{onClick:()=>se(s.id,s.status==="active"?"inactive":"active"),children:s.status==="active"?"Mark Inactive":"Activate"}),e.jsxs(S,{className:"text-red-600",onClick:()=>a(s.id,s.panchayatName),children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})]})]})})},s.id))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs(me,{children:[e.jsx(xe,{children:e.jsxs(_,{children:[e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Subdomain"}),e.jsx(x,{children:"Location"}),e.jsx(x,{children:"Admins"}),e.jsx(x,{children:"Status"}),e.jsx(x,{className:"text-right",children:"Actions"})]})}),e.jsx(he,{children:C.map(s=>e.jsxs(_,{children:[e.jsx(h,{className:"font-medium",children:s.panchayatName}),e.jsx(h,{children:s.slug}),e.jsxs(h,{children:[s.district,", ",s.state]}),e.jsx(h,{children:s.adminCount}),e.jsx(h,{children:e.jsx(E,{variant:s.status==="active"?"default":"secondary",children:s.status})}),e.jsx(h,{className:"text-right",children:e.jsxs(ae,{children:[e.jsx(le,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsxs(ie,{align:"end",children:[e.jsxs(S,{onClick:()=>r(s),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsx(S,{onClick:()=>se(s.id,s.status==="active"?"inactive":"active"),children:s.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"h-4 w-4 mr-2"}),"Mark Inactive"]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),"Activate"]})}),e.jsxs(S,{className:"text-red-600",onClick:()=>a(s.id,s.panchayatName),children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Deactivate"]})]})]})})]},s.id))})]})})]})]})]}),u==="users"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-[#1B2B5E]",children:"User Management"}),e.jsx("p",{className:"text-sm sm:text-base text-[#666] mt-1",children:"Manage all platform users"})]}),e.jsxs(y,{children:[e.jsx(Y,{children:e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-[#666]"}),e.jsx(L,{placeholder:"Search users...",value:A,onChange:s=>Z(s.target.value),className:"pl-10"})]})})}),e.jsxs(N,{children:[e.jsx("div",{className:"block sm:hidden space-y-3",children:P.length===0?e.jsx("div",{className:"text-center py-8 text-[#666] text-sm",children:"No users found"}):P.map(s=>e.jsx(y,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:s.name}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:s.email})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[e.jsx(E,{variant:"outline",className:"text-xs",children:s.role}),e.jsx(E,{variant:s.status==="active"?"default":"secondary",className:"text-xs",children:s.status}),s.panchayatName&&e.jsxs("span",{className:"text-muted-foreground",children:["Panchayat: ",s.panchayatName]})]}),e.jsx("div",{className:"flex gap-2 pt-2 border-t",children:e.jsx(m,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>Se(s.id,s.status==="active"?"inactive":"active"),children:s.status==="active"?"Deactivate":"Activate"})})]})})},s.id))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs(me,{children:[e.jsx(xe,{children:e.jsxs(_,{children:[e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Email"}),e.jsx(x,{children:"Role"}),e.jsx(x,{children:"Panchayat"}),e.jsx(x,{children:"Status"}),e.jsx(x,{className:"text-right",children:"Actions"})]})}),e.jsx(he,{children:P.map(s=>e.jsxs(_,{children:[e.jsx(h,{className:"font-medium",children:s.name}),e.jsx(h,{children:s.email}),e.jsx(h,{children:e.jsx(E,{variant:"outline",children:s.role})}),e.jsx(h,{children:s.panchayatName||"N/A"}),e.jsx(h,{children:e.jsx(E,{variant:s.status==="active"?"default":"secondary",children:s.status})}),e.jsx(h,{className:"text-right",children:e.jsxs(ae,{children:[e.jsx(le,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"icon",children:e.jsx(pe,{className:"h-4 w-4"})})}),e.jsx(ie,{align:"end",children:e.jsxs(S,{onClick:()=>Se(s.id,s.status==="active"?"inactive":"active"),children:[e.jsx(J,{className:"h-4 w-4 mr-2"}),s.status==="active"?"Deactivate":"Activate"]})})]})})]},s.id))})]})})]})]})]}),u==="landing-page"&&e.jsx("div",{className:"space-y-4 sm:space-y-6",children:e.jsx(ls,{})}),u==="analytics"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-[#1B2B5E]",children:"System Analytics"}),e.jsx("p",{className:"text-sm sm:text-base text-[#666] mt-1",children:"Platform-wide analytics and insights"})]}),e.jsxs(y,{children:[e.jsx(Y,{children:e.jsx(re,{children:"Analytics Overview"})}),e.jsx(N,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#666]",children:"Total Panchayats"}),e.jsx("p",{className:"text-3xl font-bold text-[#FF9933]",children:p.totalPanchayats})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#666]",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-[#138808]",children:p.totalUsers})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#666]",children:"Total Posts"}),e.jsx("p",{className:"text-3xl font-bold text-[#FF9933]",children:p.totalPosts})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-[#666]",children:"Total Schemes"}),e.jsx("p",{className:"text-3xl font-bold text-[#138808]",children:p.totalSchemes})]})]})})]})]}),u==="audit-logs"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-[#1B2B5E]",children:"Audit Logs"}),e.jsx("p",{className:"text-sm sm:text-base text-[#666] mt-1",children:"System-wide activity logs"})]}),e.jsxs(y,{children:[e.jsx(Y,{children:e.jsx(re,{children:"Recent Activities"})}),e.jsxs(N,{children:[e.jsx("div",{className:"block sm:hidden space-y-3",children:D.length===0?e.jsx("div",{className:"text-center py-8 text-[#666] text-sm",children:"No audit logs found"}):D.map(s=>e.jsx(y,{children:e.jsx(N,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-sm",children:s.userName}),e.jsx(E,{variant:"outline",className:"text-xs",children:s.action})]}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsxs("div",{children:["Resource: ",s.resource]}),s.ipAddress&&e.jsxs("div",{children:["IP: ",s.ipAddress]}),e.jsxs("div",{children:["Time: ",ue(s.createdAt)]})]})]})})},s.id))}),e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs(me,{children:[e.jsx(xe,{children:e.jsxs(_,{children:[e.jsx(x,{children:"User"}),e.jsx(x,{children:"Action"}),e.jsx(x,{children:"Resource"}),e.jsx(x,{children:"IP Address"}),e.jsx(x,{children:"Time"})]})}),e.jsx(he,{children:D.map(s=>e.jsxs(_,{children:[e.jsx(h,{className:"font-medium",children:s.userName}),e.jsx(h,{children:e.jsx(E,{variant:"outline",children:s.action})}),e.jsx(h,{children:s.resource}),e.jsx(h,{children:s.ipAddress||"N/A"}),e.jsx(h,{children:ue(s.createdAt)})]},s.id))})]})})]})]})]})]})})]})]}),e.jsx(ke,{open:ce,onOpenChange:q,children:e.jsxs(Le,{className:"max-w-[95vw] sm:max-w-2xl max-h-[90vh] overflow-y-auto p-4 sm:p-6",children:[e.jsxs(Ue,{children:[e.jsx(Oe,{children:R?"Edit Panchayat":"Create New Panchayat"}),e.jsx(Me,{children:R?"Update panchayat information below":"Enter the panchayat details to create a new panchayat"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"panchayatName",className:"text-sm sm:text-base",children:"Panchayat Name *"}),e.jsx(L,{id:"panchayatName",placeholder:"Enter panchayat name",value:i.panchayatName,onChange:s=>f({...i,panchayatName:s.target.value}),className:"text-sm sm:text-base",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"slug",className:"text-sm sm:text-base",children:"Subdomain/Slug *"}),e.jsx(L,{id:"slug",placeholder:"e.g., ramnagar",value:i.slug,onChange:s=>f({...i,slug:s.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),className:"text-sm sm:text-base",required:!0}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Only lowercase letters, numbers, and hyphens allowed"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"district",className:"text-sm sm:text-base",children:"District *"}),e.jsx(L,{id:"district",placeholder:"Enter district",value:i.district,onChange:s=>f({...i,district:s.target.value}),className:"text-sm sm:text-base",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"state",className:"text-sm sm:text-base",children:"State *"}),e.jsx(L,{id:"state",placeholder:"Enter state",value:i.state,onChange:s=>f({...i,state:s.target.value}),className:"text-sm sm:text-base",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"address",className:"text-sm sm:text-base",children:"Address"}),e.jsx(Fe,{id:"address",placeholder:"Enter panchayat address",value:i.address,onChange:s=>f({...i,address:s.target.value}),className:"text-sm sm:text-base",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"contactPhone",className:"text-sm sm:text-base",children:"Contact Phone"}),e.jsx(L,{id:"contactPhone",placeholder:"10-digit phone number",value:i.contactPhone,onChange:s=>f({...i,contactPhone:s.target.value.replace(/\D/g,"").substring(0,10)}),className:"text-sm sm:text-base",maxLength:10})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"contactEmail",className:"text-sm sm:text-base",children:"Contact Email"}),e.jsx(L,{id:"contactEmail",type:"email",placeholder:"contact@example.com",value:i.contactEmail,onChange:s=>f({...i,contactEmail:s.target.value}),className:"text-sm sm:text-base"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx($,{htmlFor:"description",className:"text-sm sm:text-base",children:"Description"}),e.jsx(Fe,{id:"description",placeholder:"Enter panchayat description",value:i.description,onChange:s=>f({...i,description:s.target.value}),className:"text-sm sm:text-base",rows:4})]})]}),e.jsxs(Ge,{children:[e.jsx(m,{type:"button",variant:"outline",onClick:o,children:"Cancel"}),e.jsx(m,{type:"button",onClick:R?Ve:I,children:R?"Update":"Create"})]})]})})]})}export{Bs as SuperAdminDashboard};
