import{c as j,r as i,w as u,j as e,B as t,E as N,L as g,s as h}from"./index-B5GP4ZU0.js";import{D as p,a as b,b as D,c as k}from"./dialog-D8fBtqfZ.js";const L=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],E=j("download",L);function C({document:s,open:n,onOpenChange:d}){const[l,r]=i.useState(null),[v,o]=i.useState(!1),[x,c]=i.useState(null);i.useEffect(()=>{n&&s?f():(r(null),c(null))},[n,s]);const f=async()=>{if(s){o(!0),c(null);try{if(s.viewLink){r(s.viewLink),o(!1);return}if(s.id||s.documentId){const a=await u.getViewLink(s.id||String(s.documentId));r(a)}else throw new Error("Document ID not available")}catch(a){console.error("Failed to load document view link:",a),c(a.message||"Failed to load document")}finally{o(!1)}}},w=()=>{l&&window.open(l,"_blank")},m=()=>{s?.googleDriveFileId?window.open(`https://drive.google.com/file/d/${s.googleDriveFileId}/view`,"_blank"):l&&window.open(l,"_blank")};return s?e.jsx(p,{open:n,onOpenChange:d,children:e.jsxs(b,{className:"max-w-6xl max-h-[90vh] p-0",children:[e.jsx(D,{className:"px-6 pt-6 pb-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(k,{className:"text-xl text-[#1B2B5E]",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(t,{variant:"outline",size:"sm",onClick:w,disabled:!l,children:[e.jsx(E,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsxs(t,{variant:"outline",size:"sm",onClick:m,disabled:!s.googleDriveFileId&&!l,children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Open in Drive"]})]})]})}),e.jsx("div",{className:"flex-1 overflow-hidden",children:v?e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(g,{className:"h-8 w-8 animate-spin text-[#E31E24] mx-auto mb-4"}),e.jsx("p",{className:"text-[#666]",children:"Loading document..."})]})}):x?e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(h,{className:"h-12 w-12 text-destructive mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-[#1B2B5E] mb-2",children:"Document Not Available"}),e.jsx("p",{className:"text-[#666] mb-4",children:x}),e.jsx(t,{variant:"outline",onClick:()=>d(!1),children:"Close"})]})}):l?e.jsx("iframe",{src:l,className:"w-full h-[60vh] border-0",title:s.title,allow:"fullscreen"}):e.jsx("div",{className:"flex items-center justify-center h-[60vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-[#666]",children:"Document preview not available"}),e.jsx(t,{variant:"outline",className:"mt-4",onClick:m,children:"Open in Google Drive"})]})})})]})}):null}export{E as D,C as a};
