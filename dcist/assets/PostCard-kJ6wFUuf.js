import{c as h,r as c,j as e,C,b as F,D as M,n as $,B as n,o as S,q as g}from"./index-B5GP4ZU0.js";import{A as P,b as D,a as L}from"./avatar-AVFod3uN.js";import{S as _}from"./separator-D-SV_8Ad.js";import{I as j}from"./ImageWithFallback-CPTj3iC7.js";import{I as A}from"./image-modal-c-Ha-HLI.js";import{E}from"./ellipsis-vertical-BPQDY5HV.js";import{H as u}from"./heart-5VJOFeSd.js";const q=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],z=h("message-circle",q);const O=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],B=h("play",O);const H=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],R=h("share-2",H);function Q({post:s,showActions:f=!1,onEdit:p,onDelete:N}){const[t,v]=c.useState(!1),[r,y]=c.useState(s.likes),[w,o]=c.useState(!1),[d,x]=c.useState(0),k=()=>{v(!t),y(t?r-1:r+1)},b=a=>{(s.media?.filter(m=>m.type==="image")||[]).length>0&&(x(a),o(!0))},i=s.media?.filter(a=>a.type==="image").map(a=>a.url)||[];return e.jsxs(C,{className:"overflow-hidden",children:[e.jsxs(F,{className:"p-0",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(P,{children:[e.jsx(D,{src:""}),e.jsx(L,{className:"bg-[#FF9933]/10 text-[#FF9933]",children:s.author.split(" ").map(a=>a[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h4",{children:s.author}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.authorRole," â€¢ ",s.timestamp]})]})]}),f&&e.jsxs(M,{children:[e.jsx($,{asChild:!0,children:e.jsx(n,{variant:"ghost",size:"icon",children:e.jsx(E,{className:"h-5 w-5"})})}),e.jsxs(S,{align:"end",children:[e.jsx(g,{onClick:()=>p?.(s.id),children:"Edit Post"}),e.jsx(g,{onClick:()=>N?.(s.id),className:"text-destructive",children:"Delete Post"})]})]})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsx("p",{className:"whitespace-pre-wrap",children:s.content})}),s.media&&s.media.length>0&&e.jsx("div",{className:`grid gap-1 ${s.media.length===1?"grid-cols-1":s.media.length===2?"grid-cols-2":s.media.length===3?"grid-cols-3":"grid-cols-2"}`,children:s.media.slice(0,4).map((a,l)=>{const m=s.media.slice(0,l).filter(I=>I.type==="image").length;return e.jsx("div",{className:`relative aspect-square overflow-hidden bg-muted ${s.media.length===1?"aspect-video":""} ${s.media.length>4&&l===3?"relative":""} ${a.type==="image"?"cursor-pointer":""}`,onClick:()=>a.type==="image"&&b(m),children:a.type==="image"?e.jsxs(e.Fragment,{children:[e.jsx(j,{src:a.url,alt:`Post media ${l+1}`,className:"h-full w-full object-cover"}),s.media.length>4&&l===3&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 text-white",children:e.jsxs("span",{style:{fontSize:"1.5rem"},children:["+",s.media.length-4]})})]}):e.jsxs("div",{className:"relative h-full w-full",children:[e.jsx(j,{src:a.thumbnail||a.url,alt:`Video thumbnail ${l+1}`,className:"h-full w-full object-cover","data-post-id":s.id}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30",children:e.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-white/90",children:e.jsx(B,{className:"h-8 w-8 text-[#FF9933]"})})})]})},l)})}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-[#FF9933]",children:e.jsx(u,{className:"h-3 w-3 fill-white text-white"})}),e.jsx("span",{children:r})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{children:[s.comments," comments"]}),e.jsxs("span",{children:[s.shares," shares"]})]})]}),e.jsx(_,{}),e.jsxs("div",{className:"grid grid-cols-3 p-2",children:[e.jsxs(n,{variant:"ghost",className:`flex items-center gap-2 ${t?"text-[#FF9933]":""}`,onClick:k,children:[e.jsx(u,{className:`h-5 w-5 ${t?"fill-current":""}`}),e.jsx("span",{children:"Like"})]}),e.jsxs(n,{variant:"ghost",className:"flex items-center gap-2",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsx("span",{children:"Comment"})]}),e.jsxs(n,{variant:"ghost",className:"flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5"}),e.jsx("span",{children:"Share"})]})]})]}),i.length>0&&e.jsx(A,{isOpen:w,onClose:()=>o(!1),imageUrl:i[d]||i[0],alt:`Post image ${d+1}`,images:i.length>1?i:void 0,currentIndex:d,onIndexChange:x})]})}export{z as M,Q as P};
