import{a as v,u as P,h as E,r as c,j as s,B as N,L as w,C,d as B,M as L,e as F,f as S,b as A,g as k,t as T}from"./index-B5GP4ZU0.js";import{I}from"./input-C4RtHFee.js";import{B as $}from"./badge-ALW9Fyqs.js";import{A as q}from"./arrow-left-DiVvMP4j.js";import{S as H}from"./search-JXwptwBL.js";import{B as M}from"./building-2-Dv7kGGrs.js";import{F as Q}from"./file-text-DFT2MlA2.js";import{U as R}from"./users-BuGIPw5K.js";function W(){const{t:a}=v(),u=P(),[j]=E(),[o,p]=c.useState([]),[m,r]=c.useState([]),[t,d]=c.useState(""),[f,g]=c.useState(!0);c.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),c.useEffect(()=>{(async()=>{try{g(!0);const l=(await k.getAll()).filter(i=>i.status==="ACTIVE"||!i.status);p(l);const x=j.get("search");if(x){d(x);const i=x.toLowerCase(),y=l.filter(h=>h.name.toLowerCase().includes(i)||h.district.toLowerCase().includes(i)||h.subdomain.toLowerCase().includes(i));r(y)}else r(l)}catch(n){console.error("Error fetching panchayats:",n),T.error(a("notifications.loadPanchayatsError")),p([]),r([])}finally{g(!1)}})()},[j,a]),c.useEffect(()=>{if(!t.trim()){r(o);return}const e=t.toLowerCase(),n=o.filter(l=>l.name.toLowerCase().includes(e)||l.district.toLowerCase().includes(e)||l.subdomain.toLowerCase().includes(e));r(n)},[t,o]);const b=e=>{u(`/panchayat/${e}`)};return s.jsxs("div",{className:"min-h-screen bg-[#F5F5F5]",children:[s.jsx("section",{className:"border-b border-[#E5E5E5] bg-white",children:s.jsxs("div",{className:"container mx-auto px-4 py-6 lg:px-8",children:[s.jsxs(N,{variant:"ghost",onClick:()=>u("/"),className:"mb-4 text-[#666] hover:text-[#1B2B5E]",children:[s.jsx(q,{className:"mr-2 h-4 w-4"}),a("common.backToHome")]}),s.jsx("h1",{className:"mb-2 text-3xl font-bold text-[#1B2B5E] sm:text-4xl",children:a("allPanchayats.title")}),s.jsx("p",{className:"text-[#666]",children:a("allPanchayats.subtitle")})]})}),s.jsxs("main",{className:"container mx-auto px-4 py-8 lg:px-8",children:[s.jsx("div",{className:"mb-8",children:s.jsx("div",{className:"mx-auto max-w-2xl",children:s.jsx("div",{className:"flex gap-2 rounded-lg bg-white p-2 shadow-sm border border-[#E5E5E5]",children:s.jsxs("div",{className:"flex flex-1 items-center gap-2",children:[s.jsx(H,{className:"h-5 w-5 text-[#666]"}),s.jsx(I,{type:"search",placeholder:a("allPanchayats.searchPlaceholder"),value:t,onChange:e=>d(e.target.value),className:"border-0 bg-transparent text-[#333] focus-visible:ring-0"})]})})})}),s.jsx("div",{className:"mb-6 flex items-center justify-between",children:s.jsx("p",{className:"text-[#666]",children:f?a("allPanchayats.loading"):s.jsxs(s.Fragment,{children:[a("allPanchayats.showing")," ",s.jsx("span",{className:"font-semibold text-[#1B2B5E]",children:m.length})," ",m.length===1?a("allPanchayats.panchayat"):a("allPanchayats.panchayats"),t&&` ${a("allPanchayats.matching")} "${t}"`]})})}),f?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(w,{className:"mx-auto h-8 w-8 animate-spin text-[#E31E24] mb-4"}),s.jsx("p",{className:"text-[#666]",children:a("allPanchayats.loading")})]}):m.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(M,{className:"mx-auto h-16 w-16 text-[#666] mb-4 opacity-50"}),s.jsx("p",{className:"text-lg font-semibold text-[#1B2B5E] mb-2",children:a(t?"allPanchayats.noResults":"allPanchayats.noAvailable")}),s.jsx("p",{className:"text-[#666]",children:a(t?"allPanchayats.tryAdjusting":"allPanchayats.checkBack")}),t&&s.jsx(N,{variant:"outline",className:"mt-4",onClick:()=>{d(""),r(o)},children:a("allPanchayats.clearSearch")})]}):s.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:m.map((e,n)=>s.jsxs(C,{className:"border border-[#E5E5E5] bg-white shadow-sm transition-all hover:shadow-md hover:scale-105 cursor-pointer",onClick:()=>b(e.subdomain),children:[s.jsxs(B,{children:[s.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[s.jsx(L,{className:"h-4 w-4 text-[#FF9933]"}),s.jsx($,{variant:"secondary",className:"bg-[#F5F5F5] text-[#666] text-xs",children:e.district})]}),s.jsx(F,{className:"text-[#1B2B5E]",children:e.name}),s.jsx(S,{className:"text-[#666]",children:a("allPanchayats.gramPanchayat")})]}),s.jsx(A,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Q,{className:"h-4 w-4 text-[#138808]"}),s.jsx("span",{className:"text-sm text-[#666]",children:a("allPanchayats.activeSchemes")})]}),s.jsx("span",{className:"font-semibold text-[#138808]",children:e.schemes||0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(R,{className:"h-4 w-4 text-[#E31E24]"}),s.jsx("span",{className:"text-sm text-[#666]",children:a("allPanchayats.population")})]}),s.jsx("span",{className:"font-semibold text-[#1B2B5E]",children:e.population>0?e.population.toLocaleString():a("common.notAvailable")})]}),s.jsx("div",{className:"pt-2 border-t border-[#E5E5E5]",children:s.jsxs("p",{className:"text-xs text-[#666]",children:[a("allPanchayats.visit"),": ",s.jsxs("span",{className:"font-medium text-[#1B2B5E]",children:[e.subdomain,".egramseva.gov.in"]})]})})]})})]},e.subdomain||n))})]})]})}export{W as AllPanchayatsPage};
