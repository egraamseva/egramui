import{a as I,u as q,r as h,U as A,M as E,j as e,B as g,C as L,d as M,e as V,f as H,b as z,t,g as U}from"./index-B5GP4ZU0.js";import{I as d}from"./input-C4RtHFee.js";import{L as o}from"./label-k4a1c30R.js";import{S as v,a as N,b as f,c as b,d as l}from"./select-dEcH2o1V.js";import{C as $}from"./checkbox-sHSxgcd9.js";import{P as J}from"./progress-B_j9cJD-.js";import{B as Z}from"./badge-ALW9Fyqs.js";import{C as w}from"./check-BfJ-MShT.js";import{A as y}from"./arrow-left-DiVvMP4j.js";import{A as G}from"./arrow-right-wv12TqbR.js";function te(){const{t:s}=I(),p=q(),[i,x]=h.useState(1),[u,j]=h.useState(!1),[a,n]=h.useState({sachivName:"",email:"",phone:"",designation:"",password:"",confirmPassword:"",panchayatName:"",district:"",state:"",block:"",population:"",area:"",wards:"",subdomain:"",idProof:null,appointmentLetter:null,panchayatCertificate:null,acceptTerms:!1}),c=3,P=i/c*100;h.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const C=[{number:1,title:s("registration.step1Title"),icon:A},{number:2,title:s("registration.step2Title"),icon:E},{number:3,title:s("registration.step3Title"),icon:w}],F=()=>{const r=a.phone?.replace(/\D/g,"")||"";return a.sachivName.trim()!==""&&a.designation!==""&&a.email.trim()!==""&&r.length===10&&a.password.trim()!==""&&a.confirmPassword.trim()!==""&&a.password===a.confirmPassword},k=()=>a.panchayatName.trim()!==""&&a.state!==""&&a.district.trim()!==""&&a.block.trim()!==""&&a.subdomain.trim()!=="",S=()=>i===1?F():i===2?k():!0,R=()=>{i<c&&x(i+1)},T=()=>{i>1&&x(i-1)},D=async()=>{if(!a.sachivName.trim()){t.error(s("validation.nameRequired"));return}if(!a.designation){t.error(s("validation.designationRequired"));return}if(!a.email.trim()){t.error(s("validation.emailRequired"));return}const r=a.phone?.replace(/\D/g,"")||"";if(!r||r.length!==10){t.error(s("validation.phoneInvalid"));return}if(!a.panchayatName.trim()){t.error(s("validation.panchayatNameRequired"));return}if(!a.district.trim()){t.error(s("validation.districtRequired"));return}if(!a.state){t.error(s("validation.stateRequired"));return}if(!a.subdomain.trim()){t.error(s("validation.subdomainRequired"));return}if(!/^[a-z0-9-]+$/.test(a.subdomain.toLowerCase())){t.error(s("validation.subdomainInvalid"));return}if(!a.acceptTerms){t.error(s("validation.termsRequired"));return}if(!a.password||a.password.length<8){t.error(s("validation.passwordMinLength"));return}if(a.password!==a.confirmPassword){t.error(s("validation.passwordMismatch"));return}if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/.test(a.password)){t.error(s("validation.passwordWeak"));return}j(!0);try{const m={...a,phone:r,subdomain:a.subdomain.toLowerCase().trim()};await U.register(m),t.success(s("notifications.registrationSuccess")),p("/success")}catch(m){const B=m instanceof Error?m.message:s("notifications.registrationError");t.error(B)}finally{j(!1)}};return e.jsx("div",{className:"min-h-screen bg-[#F5F5F5] py-8",children:e.jsxs("div",{className:"container mx-auto px-4 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs(g,{variant:"ghost",onClick:()=>p("/"),className:"text-[#666] hover:text-[#1B2B5E]",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),s("common.backToHome")]})}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#1B2B5E]",children:s("registration.title")}),e.jsx(Z,{variant:"secondary",className:"bg-[#F5F5F5] text-[#666]",children:s("registration.stepProgress",{current:i,total:c})})]}),e.jsx(J,{value:P,className:"h-2"})]}),e.jsxs(L,{className:"mx-auto max-w-3xl",children:[e.jsxs(M,{children:[e.jsx(V,{children:C[i-1].title}),e.jsxs(H,{children:[i===1&&s("registration.step1Description"),i===2&&s("registration.step2Description"),i===3&&s("registration.step3Description")]})]}),e.jsxs(z,{children:[i===1&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"sachivName",children:[s("registration.fullName")," *"]}),e.jsx(d,{id:"sachivName",placeholder:s("registration.fullNamePlaceholder"),value:a.sachivName,onChange:r=>n({...a,sachivName:r.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"designation",children:[s("registration.designation")," *"]}),e.jsxs(v,{value:a.designation,onValueChange:r=>n({...a,designation:r}),children:[e.jsx(N,{id:"designation",children:e.jsx(f,{placeholder:s("registration.designationPlaceholder")})}),e.jsxs(b,{children:[e.jsx(l,{value:"sachiv",children:s("registration.sachiv")}),e.jsx(l,{value:"sarpanch",children:s("registration.sarpanch")}),e.jsx(l,{value:"upsarpanch",children:s("registration.upSarpanch")}),e.jsx(l,{value:"ward-member",children:s("registration.wardMember")})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"email",children:[s("registration.email")," *"]}),e.jsx(d,{id:"email",type:"email",placeholder:s("registration.emailPlaceholder"),value:a.email,onChange:r=>n({...a,email:r.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"phone",children:[s("registration.phone")," *"]}),e.jsx(d,{id:"phone",type:"tel",placeholder:s("registration.phonePlaceholder"),value:a.phone,onChange:r=>n({...a,phone:r.target.value})})]})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"password",children:[s("registration.password")," *"]}),e.jsx(d,{id:"password",type:"password",placeholder:s("registration.passwordPlaceholder"),value:a.password,onChange:r=>n({...a,password:r.target.value})}),e.jsx("p",{className:"text-xs text-gray-500",children:s("registration.passwordHint")})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"confirmPassword",children:[s("registration.confirmPassword")," *"]}),e.jsx(d,{id:"confirmPassword",type:"password",placeholder:s("registration.confirmPasswordPlaceholder"),value:a.confirmPassword,onChange:r=>n({...a,confirmPassword:r.target.value})})]})]})]}),i===2&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"panchayatName",children:[s("registration.panchayatName")," *"]}),e.jsx(d,{id:"panchayatName",placeholder:s("registration.panchayatNamePlaceholder"),value:a.panchayatName,onChange:r=>n({...a,panchayatName:r.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"state",children:[s("registration.state")," *"]}),e.jsxs(v,{value:a.state,onValueChange:r=>n({...a,state:r}),children:[e.jsx(N,{id:"state",children:e.jsx(f,{placeholder:s("registration.statePlaceholder")})}),e.jsxs(b,{children:[e.jsx(l,{value:"UP",children:s("registration.uttarPradesh")}),e.jsx(l,{value:"MH",children:s("registration.maharashtra")}),e.jsx(l,{value:"RJ",children:s("registration.rajasthan")}),e.jsx(l,{value:"GJ",children:s("registration.gujarat")}),e.jsx(l,{value:"BR",children:s("registration.bihar")})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 sm:gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"district",children:[s("registration.district")," *"]}),e.jsx(d,{id:"district",placeholder:s("registration.districtPlaceholder"),value:a.district,onChange:r=>n({...a,district:r.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"block",children:[s("registration.block")," *"]}),e.jsx(d,{id:"block",placeholder:s("registration.blockPlaceholder"),value:a.block,onChange:r=>n({...a,block:r.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"subdomain",children:[s("registration.subdomain")," *"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{id:"subdomain",placeholder:s("registration.subdomainPlaceholder"),value:a.subdomain,onChange:r=>n({...a,subdomain:r.target.value})}),e.jsx("span",{className:"whitespace-nowrap text-muted-foreground",children:".egramseva.gov.in"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.subdomainHint",{subdomain:a.subdomain||s("registration.subdomainPlaceholder")})})]})]}),i===3&&e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 sm:p-6",children:[e.jsx("h4",{className:"mb-4",children:s("registration.personalInfo")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("common.name")}),e.jsx("p",{children:a.sachivName||s("registration.notProvided")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.designation")}),e.jsx("p",{children:a.designation||s("registration.notProvided")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.email")}),e.jsx("p",{children:a.email||s("registration.notProvided")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.phone")}),e.jsx("p",{children:a.phone||s("registration.notProvided")})]})]})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 sm:p-6",children:[e.jsx("h4",{className:"mb-4",children:s("registration.panchayatInfo")}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.panchayatName")}),e.jsx("p",{children:a.panchayatName||s("registration.notProvided")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.state")}),e.jsx("p",{children:a.state||s("registration.notProvided")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.district")}),e.jsx("p",{children:a.district||s("registration.notProvided")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.block")}),e.jsx("p",{children:a.block||s("registration.notProvided")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.subdomain")}),e.jsxs("p",{className:"text-[#FF9933]",children:[a.subdomain||s("registration.subdomainPlaceholder"),".egramseva.gov.in"]})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx($,{id:"terms",checked:a.acceptTerms,onCheckedChange:r=>n({...a,acceptTerms:r})}),e.jsxs("div",{className:"grid gap-1.5 leading-none",children:[e.jsxs("label",{htmlFor:"terms",className:"cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[s("registration.acceptTerms")," *"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s("registration.certifyInfo")})]})]})]}),e.jsxs("div",{className:"mt-6 sm:mt-8 flex flex-col sm:flex-row justify-between gap-3 sm:gap-0",children:[e.jsxs(g,{variant:"outline",onClick:T,disabled:i===1,className:"w-full sm:w-auto order-2 sm:order-1",children:[e.jsx(y,{className:"mr-2 h-4 w-4"}),s("common.previous")]}),i<c?e.jsxs(g,{onClick:R,disabled:!S(),className:"bg-[#FF9933] hover:bg-[#FF9933]/90 w-full sm:w-auto order-1 sm:order-2",children:[s("common.next"),e.jsx(G,{className:"ml-2 h-4 w-4"})]}):e.jsxs(g,{onClick:D,disabled:!a.acceptTerms||u,className:"bg-[#138808] hover:bg-[#138808]/90 w-full sm:w-auto order-1 sm:order-2",children:[s(u?"registration.submitting":"registration.submitButton"),e.jsx(w,{className:"ml-2 h-4 w-4"})]})]})]})]})]})})}export{te as RegistrationFlow};
