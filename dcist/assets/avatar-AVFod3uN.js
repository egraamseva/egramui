import{r as i,j as l,J as R,K as I,N as P,Q as g,R as S}from"./index-B5GP4ZU0.js";function $(e,t=[]){let n=[];function o(a,u){const r=i.createContext(u);r.displayName=a+"Context";const c=n.length;n=[...n,u];const d=f=>{const{scope:m,children:x,...p}=f,N=m?.[e]?.[c]||r,j=i.useMemo(()=>p,Object.values(p));return l.jsx(N.Provider,{value:j,children:x})};d.displayName=a+"Provider";function v(f,m){const x=m?.[e]?.[c]||r,p=i.useContext(x);if(p)return p;if(u!==void 0)return u;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[d,v]}const s=()=>{const a=n.map(u=>i.createContext(u));return function(r){const c=r?.[e]||a;return i.useMemo(()=>({[`__scope${e}`]:{...r,[e]:c}}),[r,c])}};return s.scopeName=e,[o,k(s,...t)]}function k(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const o=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const u=o.reduce((r,{useScope:c,scopeName:d})=>{const f=c(a)[`__scope${d}`];return{...r,...f}},{});return i.useMemo(()=>({[`__scope${t.scopeName}`]:u}),[u])}};return n.scopeName=t.scopeName,n}var M=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],A=M.reduce((e,t)=>{const n=R(`Primitive.${t}`),o=i.forwardRef((s,a)=>{const{asChild:u,...r}=s,c=u?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(c,{...r,ref:a})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function F(){return I.useSyncExternalStore(z,()=>!0,()=>!1)}function z(){return()=>{}}var h="Avatar",[H]=$(h),[T,w]=H(h),L=i.forwardRef((e,t)=>{const{__scopeAvatar:n,...o}=e,[s,a]=i.useState("idle");return l.jsx(T,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:l.jsx(A.span,{...o,ref:t})})});L.displayName=h;var b="AvatarImage",E=i.forwardRef((e,t)=>{const{__scopeAvatar:n,src:o,onLoadingStatusChange:s=()=>{},...a}=e,u=w(b,n),r=B(o,a),c=P(d=>{s(d),u.onImageLoadingStatusChange(d)});return g(()=>{r!=="idle"&&c(r)},[r,c]),r==="loaded"?l.jsx(A.img,{...a,ref:t,src:o}):null});E.displayName=b;var _="AvatarFallback",y=i.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:o,...s}=e,a=w(_,n),[u,r]=i.useState(o===void 0);return i.useEffect(()=>{if(o!==void 0){const c=window.setTimeout(()=>r(!0),o);return()=>window.clearTimeout(c)}},[o]),u&&a.imageLoadingStatus!=="loaded"?l.jsx(A.span,{...s,ref:t}):null});y.displayName=_;function C(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function B(e,{referrerPolicy:t,crossOrigin:n}){const o=F(),s=i.useRef(null),a=o?(s.current||(s.current=new window.Image),s.current):null,[u,r]=i.useState(()=>C(a,e));return g(()=>{r(C(a,e))},[a,e]),g(()=>{const c=f=>()=>{r(f)};if(!a)return;const d=c("loaded"),v=c("error");return a.addEventListener("load",d),a.addEventListener("error",v),t&&(a.referrerPolicy=t),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",d),a.removeEventListener("error",v)}},[a,n,t]),u}var K=L,q=E,D=y;function J({className:e,...t}){return l.jsx(K,{"data-slot":"avatar",className:S("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function O({className:e,...t}){return l.jsx(q,{"data-slot":"avatar-image",className:S("aspect-square size-full",e),...t})}function Q({className:e,...t}){return l.jsx(D,{"data-slot":"avatar-fallback",className:S("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}export{J as A,Q as a,O as b};
