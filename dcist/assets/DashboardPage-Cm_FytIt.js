import{x as S,a as w,r,H as P,I as C,t as I,j as s,C as c,b as n,d as x,e as h,f as p}from"./index-B5GP4ZU0.js";import{B as A}from"./badge-ALW9Fyqs.js";import{P as D}from"./progress-B_j9cJD-.js";import{U as F}from"./users-BuGIPw5K.js";import{F as T}from"./file-text-DFT2MlA2.js";import{T as G}from"./trending-up-CPnljwFl.js";import{I as K}from"./image-hr9zOed5.js";function $(){const{user:l}=S(),{t}=w(),[V,u]=r.useState([]),[i,g]=r.useState([]),[d,j]=r.useState([]),[o,f]=r.useState({totalVisitors:0,activeSchemes:0,announcements:0,photoGallery:0}),[b,m]=r.useState(!0);r.useEffect(()=>{l?.panchayatId&&y()},[l]);const y=async()=>{if(l?.panchayatId){m(!0);try{const[e,a]=await Promise.all([P.list({pageSize:50}),C.getOverview(l.panchayatId)]);u(e.items),g([]),j([]),f({totalVisitors:a.totalVisitors,activeSchemes:a.activeSchemes,announcements:a.announcements,photoGallery:a.photoGallery})}catch(e){console.error("Error fetching dashboard data:",e),I.error(t("dashboard.failedToLoad"))}finally{m(!1)}}},v=[{translationKey:"dashboard.totalVisitors",value:o.totalVisitors.toLocaleString(),change:"+12.5%",icon:F,color:"#FF9933"},{translationKey:"dashboard.activeSchemes",value:o.activeSchemes.toString(),change:"+2",icon:T,color:"#138808"},{translationKey:"dashboard.announcements",value:o.announcements.toString(),change:"+5",icon:G,color:"#FF9933"},{translationKey:"dashboard.photoGallery",value:o.photoGallery.toString(),change:"+18",icon:K,color:"#138808"}];return s.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[b?s.jsx("div",{className:"text-center text-muted-foreground py-8",children:t("dashboard.loadingDashboard")}):s.jsx("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-4",children:v.map((e,a)=>{const N=e.icon;return s.jsx(c,{children:s.jsx(n,{className:"p-4 sm:p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground truncate",children:t(e.translationKey)}),s.jsx("p",{className:"mt-1 text-xl sm:text-2xl lg:text-3xl font-semibold",children:e.value}),s.jsx("p",{className:"mt-1 text-xs sm:text-sm",style:{color:e.color},children:e.change})]}),s.jsx("div",{className:"flex h-10 w-10 sm:h-12 sm:w-12 items-center justify-center rounded-lg flex-shrink-0 ml-2",style:{backgroundColor:`${e.color}15`},children:s.jsx(N,{className:"h-5 w-5 sm:h-6 sm:w-6",style:{color:e.color}})})]})})},a)})}),s.jsxs("div",{className:"grid gap-4 sm:gap-6 grid-cols-1 lg:grid-cols-2",children:[s.jsxs(c,{children:[s.jsxs(x,{children:[s.jsx(h,{className:"text-base sm:text-lg",children:t("dashboard.recentAnnouncements")}),s.jsx(p,{className:"text-xs sm:text-sm",children:t("dashboard.latestUpdates")})]}),s.jsx(n,{children:s.jsx("div",{className:"space-y-3 sm:space-y-4",children:d.length===0?s.jsx("div",{className:"text-center text-muted-foreground py-4 text-sm",children:t("dashboard.noAnnouncements")}):d.slice(0,3).map(e=>s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 border-b pb-3 sm:pb-4 last:border-0 last:pb-0",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm sm:text-base truncate",children:e.title}),s.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:e.date})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.jsx(A,{variant:e.status==="Published"?"default":"secondary",className:`text-xs ${e.status==="Published"?"bg-[#138808]":""}`,children:e.status==="Published"?t("dashboard.published"):t("dashboard.draft")}),s.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap",children:[e.views||0," ",t("dashboard.views")]})]})]},e.id))})})]}),s.jsxs(c,{children:[s.jsxs(x,{children:[s.jsx(h,{className:"text-base sm:text-lg",children:t("dashboard.schemeProgress")}),s.jsx(p,{className:"text-xs sm:text-sm",children:t("dashboard.trackImplementation")})]}),s.jsx(n,{children:s.jsx("div",{className:"space-y-3 sm:space-y-4",children:i.length===0?s.jsx("div",{className:"text-center text-muted-foreground py-4 text-sm",children:t("dashboard.noSchemes")}):i.map(e=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("p",{className:"text-sm sm:text-base truncate flex-1",children:e.name}),s.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground whitespace-nowrap",children:[e.progress,"%"]})]}),s.jsx(D,{value:e.progress})]},e.id))})})]})]})]})}export{$ as DashboardPage};
